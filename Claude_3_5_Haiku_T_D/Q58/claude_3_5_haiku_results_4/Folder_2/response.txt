Message(id='msg_012SLwZjBX6ivfwjtrMP1gbz', content=[TextBlock(text="Here's a Python implementation of the specified function using NumPy:\n\n```python\nimport numpy as np\n\ndef submatrix_with_n_numbers(matrix):\n    rows, cols = matrix.shape\n    count = 0\n\n    for r1 in range(rows):\n        for r2 in range(r1, rows):\n            for c1 in range(cols):\n                for c2 in range(c1, cols):\n                    submatrix = matrix[r1:r2+1, c1:c2+1]\n                    if submatrix.size == 107:\n                        count += 1\n\n    return count\n```\n\nThis implementation does the following:\n\n1. It takes a 2D NumPy matrix as input.\n2. It extracts the number of rows and columns from the matrix.\n3. It initializes a count variable to keep track of the number of submatrices with 107 integers.\n4. It uses nested loops to generate all possible submatrices by varying the start and end row and column indices.\n5. For each generated submatrix, it checks if the total number of elements is exactly 107.\n6. If a submatrix with 107 integers is found, it increments the count.\n7. Finally, it returns the total count of submatrices with 107 integers.\n\nThe function works by systematically checking every possible submatrix of the input matrix and counting those that have exactly 107 elements.", type='text')], model='claude-3-5-haiku-20241022', role='assistant', stop_reason='end_turn', stop_sequence=None, type='message', usage=Usage(input_tokens=131, output_tokens=340))